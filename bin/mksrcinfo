#!/bin/bash

# generate .SRCINFO from PKGBUILD
#  bleh - this should really be handled by makepkg!

(
  . ./PKGBUILD

  if [ -z "${pkgbase}" ]; then
    printf 'pkgbase = %s\n' "${pkgname}"
  else
    printf 'pkgbase = %s\n' "${pkgbase}"
  fi
  printf '\tarch = %s\n' "${arch[@]}"
  printf '\tgroups = %s\n' "${groups[@]}"
  for print in 'makedepends' 'checkdepends' 'depends' 'provides'; do
    eval printf "'\t${print} = %s\n'" '"${'"${print}"'[@]}"'
    for a in 'i686'; do
      eval printf "'\t${print} = %s\n'" '"${'"${print}_${a}"'[@]}"'
    done
  done
  printf 'pkgname = %s\n' "${pkgname[@]}"
) > .SRCINFO
