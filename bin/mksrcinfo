#!/bin/bash

# generate .SRCINFO from PKGBUILD
#  bleh - this should really be handled by makepkg!

(
  . ./PKGBUILD

  if [ -z "${pkgbase}" ]; then
    printf 'pkgbase = %s\n' "${pkgname}"
  else
    printf 'pkgbase = %s\n' "${pkgbase}"
  fi
  printf '\tarch = %s\n' "${arch[@]}"
  for print in 'makedepends' 'checkdepends' 'depends' 'provides'; do
    printf '\t'"${print}"' = %s\n' $(eval echo '${'"${print}"'[@]}')
    for a in 'i686'; do
      printf '\t'"${print}"' = %s\n' $(eval echo '${'"${print}_${a}"'[@]}')
    done
  done
  printf 'pkgname = %s\n' "${pkgname[@]}"
) > .SRCINFO
